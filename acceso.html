<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Control de Acceso - Incuba Andina Lab</title>
  <link rel="stylesheet" href="css/styles1.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <div id="app">
    <h1>Bienvenido, <span id="userName"></span></h1>
    <p>Cargando...</p>
  </div>

  <script type="module">
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAe3LW9dme23o1AGXqg4WkJ0-hrqRxx8h4",
      authDomain: "reservas-incuba.firebaseapp.com",
      projectId: "reservas-incuba",
      storageBucket: "reservas-incuba.appspot.com",
      messagingSenderId: "321837960358",
      appId: "1:321837960358:web:65127a59a8aa4aae0d7867",
      measurementId: "G-ERQ0CQWYWG"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const userRoles = {
      '018201307h@uandina.edu.pe': 'participante',
      'IncubAndinaLab@uandina.edu.pe': 'docente',
      'rhumpire@uandina.edu.pe': 'docente',
      'davilad@uandina.edu.pe': 'docente',
      'csalaso@uandina.edu.pe': 'docente',
      'mponcef@uandina.edu.pe': 'docente',
      'mholguin@uandina.edu.pe': 'docente',
      'gastete@uandina.edu.pe': 'docente',
      'acanahuire@uandina.edu.pe': 'docente',
      '020200221h@uandina.edu.pe': 'participante',
      '020201265i@uandina.edu.pe': 'participante',
      '020100833a@uandina.edu.pe': 'participante',
      '021100508b@uandina.edu.pe': 'participante',
      '022200572c@uandina.edu.pe': 'participante',
      '020200311g@uandina.edu.pe': 'participante',
      'opena@uandina.edu.pe': 'participante',
      '021101125j@uandina.edu.pe': 'participante',
      '021100635d@uandina.edu.pe': 'participante',
      '020102054j@uandina.edu.pe': 'participante',
      '009100969f@uandina.edu.pe': 'participante',
      '021100564j@uandina.edu.pe': 'participante',
      '020100212g@uandina.edu.pe': 'participante',
      '021101195h@uandina.edu.pe': 'participante',
      '020100165i@uandina.edu.pe': 'participante',
      '025101416k@uandina.edu.pe': 'participante',
      '008100282a@uandina.edu.pe': 'participante',
      '021200333j@uandina.edu.pe': 'participante',
      '024140101h@uandina.edu.pe': 'participante',
      '019201745d@uandina.edu.pe': 'participante',
      '020102235d@uandina.edu.pe': 'participante',
      '025101204c@uandina.edu.pe': 'participante',
      '022100668i@uandina.edu.pe': 'participante',
      '023100168e@uandina.edu.pe': 'participante',
      '021201216g@uandina.edu.pe': 'participante',
      '021140105f@uandina.edu.pe': 'participante',
      '024240014j@uandina.edu.pe': 'participante',
      '025110387j@uandina.edu.pe': 'participante',
      '023110081j@uandina.edu.pe': 'participante'
    };

    onAuthStateChanged(auth, (user) => {
      if (user) {
        const userEmail = user.email;
        document.getElementById('userName').textContent = user.displayName || userEmail;

        if (userRoles[userEmail]) {
          const userRole = userRoles[userEmail];
          localStorage.setItem('tipoUsuario', userRole);  // Guarda el tipo de usuario

          if (userRole === 'docente') {
            window.location.href = "horarios_docentes.html";
          } else if (userRole === 'participante') {
            window.location.href = "horarios_participantes.html";
          }
        } else {
          Swal.fire('Este correo no está registrado.', '', 'error').then(() => {
            window.location.href = "index.html";
          });
        }
      } else {
        Swal.fire('Debes iniciar sesión.', '', 'warning').then(() => {
          window.location.href = "index.html";
        });
      }
    });
  </script>
</body>
</html>
